# OpenAPI Schema for SakuraFrp API v4

openapi: 3.0.3
info:
  title: SakuraFrp API
  version: 4.1.0
  termsOfService: "https://www.natfrp.com/policy/tos"
  license:
    name: GNU Affero General Public License v3.0
    url: "https://www.gnu.org/licenses/agpl-3.0.en.html"
  contact:
    name: SakuraFrp Support
    email: support@natfrp.cloud

servers:
  - url: "https://api.natfrp.com/v4"
    description: SakuraFrp API

paths:
  /system/bulletin:
    get:
      tags: [ç³»ç»Ÿä¿¡æ¯]
      summary: è·å–å¹³å°å…¬å‘Š
      security: []
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  required:
                    - title
                    - content
                    - icon
                    - time
                    - expand
                  properties:
                    title:
                      type: string
                      description: å…¬å‘Šæ ‡é¢˜
                      example: å…³äº SakuraFrp API çš„è¯´æ˜
                    content:
                      type: string
                      description: å…¬å‘Šå†…å®¹
                      example: Lorem ipsum dolor sit amet, consectetur adipiscing elit
                    time:
                      type: string
                      description: å…¬å‘Šå‘å¸ƒæ—¶é—´
                      example: 2023/01/01
                    icon:
                      type: string
                      description: å…¬å‘Šå›¾æ ‡
                      example: ğŸ˜Š
                    expand:
                      type: boolean
                      description: æ˜¯å¦é»˜è®¤å±•å¼€
                      example: true
          description: è¿”å›å¹³å°å…¬å‘Šåˆ—è¡¨
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /system/clients:
    get:
      tags: [ç³»ç»Ÿä¿¡æ¯]
      summary: è·å–å®¢æˆ·ç«¯è½¯ä»¶ä¿¡æ¯
      security: []
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  type: object
                  description: ä¸‹è½½åˆ†ç±»
                  required:
                    - ver
                    - time
                  properties:
                    ver:
                      type: string
                      description: ç‰ˆæœ¬å·
                      example: 3.0.0
                    time:
                      type: integer
                      description: ç‰ˆæœ¬å‘å¸ƒæ—¶é—´
                      example: 1620000000
                    note:
                      type: string
                      description: æ›´æ–°æ—¥å¿—
                      example: Ut aliquam purus sit amet luctus venenatis lectus magna fringilla
                    archs:
                      type: object
                      description: æŸä¸ªåˆ†ç±»çš„æ¶æ„åˆ—è¡¨, ä»… download=true æ—¶å­˜åœ¨
                      additionalProperties:
                        type: object
                        required:
                          - title
                          - url
                          - hash
                          - size
                        properties:
                          title:
                            type: string
                            description: ä¸‹è½½æ ‡é¢˜
                            example: Windows å®‰è£…ç¨‹åº
                          url:
                            type: string
                            description: ä¸‹è½½é“¾æ¥
                            example: https://nya.globalslb.net/natfrp/client/foo/bar
                          hash:
                            type: string
                            description: ä¸‹è½½æ–‡ä»¶å“ˆå¸Œå€¼
                            example: 1234567890abcdef1234567890abcdef
                          size:
                            type: integer
                            description: ä¸‹è½½æ–‡ä»¶å¤§å°
                            example: 114514
          description: è¿”å›è½¯ä»¶ä¸‹è½½ä¿¡æ¯
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /system/policy:
    get:
      tags: [ç³»ç»Ÿä¿¡æ¯]
      summary: è·å–æœåŠ¡æ¡æ¬¾å’Œç­–ç•¥
      security: []
      parameters:
        - name: type
          in: query
          description: ç­–ç•¥ç±»å‹
          required: true
          schema:
            type: string
            enum:
              - tos
              - content
              - privacy
              - rule
              - refund
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                required:
                  - content
                properties:
                  alert:
                    type: string
                    description: ç½®é¡¶è­¦å‘Šæ¡†å†…å®¹
                    example: Habitasse platea dictumst vestibulum rhoncus est pellentesque elit
                  updated:
                    type: string
                    description: ç­–ç•¥æ›´æ–°æ—¶é—´
                    example: 2023/01/04
                  content:
                    type: string
                    description: ç­–ç•¥å†…å®¹æ–‡æœ¬
                    example: Nam at lectus urna duis. Sed pulvinar proin gravida hendrerit. Nec feugiat nisl pretium fusce id velit ut tortor pretium.
          description: è¿”å›æœåŠ¡æ¡æ¬¾å’Œç­–ç•¥
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /system/node_stats:
    get:
      tags: [ç³»ç»Ÿä¿¡æ¯]
      summary: è·å–èŠ‚ç‚¹çŠ¶æ€ä¿¡æ¯
      security: []
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                required:
                  - time
                  - in
                  - out
                properties:
                  time:
                    type: integer
                    description: æ•°æ®æ›´æ–°æ—¶é—´æˆ³
                    example: 1620000000
                  in:
                    type: string
                    description: æ€»å…¥ç½‘æµé‡
                    example: 1.0 GiB
                  out:
                    type: string
                    description: æ€»å‡ºç½‘æµé‡
                    example: 1.0 GiB
                  nodes:
                    type: array
                    items:
                      type: object
                      required:
                        - id
                        - in
                        - out
                        - online
                        - uptime
                        - load
                      properties:
                        id:
                          type: integer
                          description: èŠ‚ç‚¹ ID
                          example: 233
                        in:
                          type: string
                          description: å…¥ç½‘æµé‡
                          example: 1.0 GiB
                        out:
                          type: string
                          description: å‡ºç½‘æµé‡
                          example: 1.0 GiB
                        online:
                          type: integer
                          description: åœ¨çº¿éš§é“æ•°
                          example: 233
                        uptime:
                          type: integer
                          description: èŠ‚ç‚¹è¿è¡Œæ—¶é—´ (ç§’)
                          example: 114514
                        load:
                          type: integer
                          description: èŠ‚ç‚¹è´Ÿè½½ (%)
                          example: 19.19
          description: è¿”å›èŠ‚ç‚¹çŠ¶æ€ä¿¡æ¯
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /user/info:
    get:
      tags: [ç”¨æˆ·ä¿¡æ¯]
      summary: è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: ./schemas/UserInfo.yaml
          description: è¿”å›ç”¨æˆ·ä¿¡æ¯
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /user/data_plans:
    get:
      tags: [ç”¨æˆ·ä¿¡æ¯]
      summary: è·å–ç”¨æˆ·æµé‡åŒ…
      parameters:
        - name: status
          in: query
          description: æµé‡åŒ…çŠ¶æ€
          schema:
            type: string
            enum:
              - valid
              - invalid
              - all
            default: valid
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: ./schemas/DataPlan.yaml
          description: è¿”å›ç”¨æˆ·æµé‡åŒ…ä¿¡æ¯
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /user/traffic_history:
    get:
      tags: [ç”¨æˆ·ä¿¡æ¯]
      summary: è·å–ç”¨æˆ·æµé‡å†å²
      parameters:
        - name: type
          in: query
          description: æŸ¥è¯¢æ—¶é—´ç±»å‹
          required: true
          schema:
            type: string
            enum:
              - day
              - week
              - month
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  type: array
                  items:
                    type: string
                  maxItems: 3
                  minItems: 3
                  example:
                    - "2023-01"
                    - 0
                    - 5368709120
                  description: "æµé‡å†å²æ•°æ®ç‚¹, `[æ—¶é—´æ®µ, æµé‡æ¶ˆè€—, æµé‡å‰©ä½™]`"
          description: è¿”å›ç”¨æˆ·æµé‡å†å²
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /user/notification:
    get:
      tags: [ç”¨æˆ·ä¿¡æ¯]
      summary: è·å–ç”¨æˆ·é€šçŸ¥åˆ—è¡¨
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  required:
                    - match
                    - type
                    - title
                    - content
                  properties:
                    match:
                      type: array
                      description: è·¯ç”±åŒ¹é…è§„åˆ™åˆ—è¡¨
                      items:
                        type: string
                      example:
                        - '*'
                        - /tunnel/
                        - /user/*
                    type:
                      type: string
                      description: é€šçŸ¥ç±»å‹
                      enum:
                        - default
                        - info
                        - success
                        - warning
                        - error
                      example: info
                    title:
                      type: string
                      description: é€šçŸ¥æ ‡é¢˜
                      example: éå¸¸å¥½é€šçŸ¥ï¼Œçˆ±æ¥è‡ª iDea Leaper
                    content:
                      type: string
                      description: é€šçŸ¥å†…å®¹
                      example: lorem ipsum dolor sit amet consectetur adipiscing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua
          description: è¿”å›é€šçŸ¥åˆ—è¡¨
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /nodes:
    get:
      tags: [èŠ‚ç‚¹ç®¡ç†]
      summary: åˆ—å‡ºæ‰€æœ‰èŠ‚ç‚¹
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  type: object
                  required:
                    - name
                    - host
                    - description
                    - vip
                    - flag
                    - band
                  properties:
                    name:
                      type: string
                      description: èŠ‚ç‚¹åç§°
                      example: ä¸€ä¸ªç¥å¥‡çš„èŠ‚ç‚¹
                    host:
                      type: string
                      description: èŠ‚ç‚¹åœ°å€
                      example: idea-leaper-1.natfrp.cloud
                    description:
                      type: string
                      description: èŠ‚ç‚¹è¯´æ˜
                      example: æ¨èæŸäº›ç”¨æˆ·ä½¿ç”¨
                    vip:
                      type: integer
                      description: èŠ‚ç‚¹ VIP ç­‰çº§
                    flag:
                      type: integer
                      description: |
                        èŠ‚ç‚¹ Flag
                        - `0b11`: å…è®¸ HTTP éš§é“
                        - `1 << 2`: å…è®¸åˆ›å»ºéš§é“
                        - `1 << 3`: æ˜¯å¦ä¸ºå†…åœ°èŠ‚ç‚¹
                        - `1 << 4`: æ˜¯å¦ä¸ºæ— é˜²èŠ‚ç‚¹
                        - `1 << 5`: å…è®¸ UDP æµé‡
                        - `1 << 6`: æ˜¯å¦ä¸ºç§æœ‰èŠ‚ç‚¹
                        - `1 << 7`: tls_sucks
                        - `1 << 8`: æ˜¯å¦å¼ºåˆ¶å¯ç”¨è®¿é—®è®¤è¯
                      example: 0
                    band:
                      type: string
                      description: èŠ‚ç‚¹å¸¦å®½
                      example: 100M
          description: èŠ‚ç‚¹åˆ—è¡¨
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /tunnels:
    get:
      tags: [éš§é“ç®¡ç†]
      summary: åˆ—å‡ºæ‰€æœ‰éš§é“
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: ./schemas/Tunnel.yaml
          description: éš§é“åˆ—è¡¨
        "500": { $ref: "#/components/responses/ErrorResponse" }
    post:
      tags: [éš§é“ç®¡ç†]
      summary: åˆ›å»ºéš§é“
      requestBody:
        content:
          application/x-www-form-urlencoded: &tunnelCreateRequestBody
            schema:
              type: object
              required:
                - name
                - type
                - node
              properties:
                name:
                  description: éš§é“å
                  type: string
                  example: SampleTunnel
                type:
                  description: éš§é“ç±»å‹
                  type: string
                  enum:
                    - tcp
                    - udp
                    - http
                    - https
                    - wol
                    - etcp
                    - eudp
                node:
                  description: èŠ‚ç‚¹ ID
                  type: integer
                  example: 5
                note:
                  description: å¤‡æ³¨ä¿¡æ¯
                  type: string
                extra:
                  description: è‡ªå®šä¹‰é…ç½®æ•°æ®
                  pattern: '(?:\w+ = .+)(?:\n\w+ = .+)*'
                  type: string
                  example: |
                    key_1 = val_1
                    key_2 = val_2
                    auto_https = auto
                local_ip:
                  description: æœ¬åœ° IP, é™¤ wol ç±»å‹å¤–å¿…å¡«
                  type: string
                  example: 127.0.0.1
                local_port:
                  description: æœ¬åœ°ç«¯å£, é™¤ wol ç±»å‹å¤–å¿…å¡«
                  type: integer
                  example: 810
                remote:
                  type: string
                  description: è¿œç¨‹ä¿¡æ¯, ç«¯å£æˆ–ç»‘å®šåŸŸå (http/https ç±»å‹å¿…å¡«)
                  example: example.tld
          application/json: *tunnelCreateRequestBody
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                type: object
                required:
                  - id
                  - name
                properties:
                  id:
                    type: integer
                    description: åˆ›å»ºçš„éš§é“ ID
                    example: 114514
                  name:
                    type: string
                    description: åˆ›å»ºçš„éš§é“å
                    example: SampleTunnel
                  remote:
                    type: string
                    description: è¿œç¨‹ä¿¡æ¯, ç«¯å£æˆ–ç»‘å®šåŸŸå
                    example: example.tld
          description: åˆ›å»ºæˆåŠŸ
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /tunnel/config:
    post:
      summary: è·å–éš§é“é…ç½®æ–‡ä»¶
      tags: [éš§é“ç®¡ç†]
      requestBody:
        content:
          application/x-www-form-urlencoded: &tunnelConfigRequestBody
            schema:
              type: object
              required:
                - query
                - frpc
              properties:
                query:
                  description: |
                    å¯åŠ¨ç›®æ ‡æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæ ¼å¼ä¸º `<å¯åŠ¨ç›®æ ‡1>[,å¯åŠ¨ç›®æ ‡2...]`

                    å¤šä¸ª **å¯åŠ¨ç›®æ ‡** ä½¿ç”¨åŠè§’é€—å· "," åˆ†å¼€ï¼Œä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼æˆ–å…¶ä»–å­—ç¬¦

                    æ¯ä¸ª **å¯åŠ¨ç›®æ ‡** å¯ä»¥æ˜¯ï¼š
                    - ä¸€ä¸ªéš§é“ IDï¼ˆå¦‚ `114514`ï¼‰
                    - `n` å‰ç¼€çš„èŠ‚ç‚¹ IDï¼ˆå¦‚ `n233`ï¼‰
                  type: string
                  example: "114514,114515,n233"
                frpc:
                  description: |
                    è¦è·å–é…ç½®æ–‡ä»¶çš„ç›®æ ‡ frpc ç‰ˆæœ¬

                    - æ”¯æŒ SakuraFrp åˆ†å‘çš„ç‰ˆæœ¬å¦‚ `0.51.0-sakura-7.2`
                    - ä¹Ÿæ”¯æŒä¸Šæ¸¸ frpc ç‰ˆæœ¬å¦‚ `0.59.0`ï¼Œæœ€ä½æ”¯æŒç‰ˆæœ¬ä¸º `0.18.0`
            examples:
              æŸ¥è¯¢å•æ¡éš§é“:
                value:
                  query: "114514"
              æŸ¥è¯¢å•ä¸ªèŠ‚ç‚¹ä¸‹æ‰€æœ‰éš§é“:
                value:
                  query: n233
              æŸ¥è¯¢å¤šèŠ‚ç‚¹ä¸‹çš„å¤šæ¡éš§é“:
                value:
                  query: "n233,n234,114514"
          application/json: *tunnelConfigRequestBody

      responses:
        "200":
          content:
            text/plain: {}
            text/toml: {}
          description: å¯è¢« frpc åŠ è½½çš„ ini æˆ– toml é…ç½®æ–‡ä»¶
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /tunnel/edit:
    post:
      summary: ç¼–è¾‘éš§é“
      tags: [éš§é“ç®¡ç†]
      requestBody:
        content:
          application/x-www-form-urlencoded: &tunnelEditRequestBody
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  type: integer
                  description: éš§é“ ID
                  example: 114514
                note:
                  type: string
                  description: éš§é“å¤‡æ³¨
                  example: SampleTunnel
                local_ip:
                  type: string
                  description: æœ¬åœ° IP
                  example: 127.0.0.1
                local_port:
                  type: integer
                  description: æœ¬åœ°ç«¯å£
                  example: 114514
                extra:
                  type: string
                  description: é¢å¤–å‚æ•°åˆ—è¡¨
                  example: "key=value\nkey2=value2"
          application/json: *tunnelEditRequestBody
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                required:
                  - extra
                properties:
                  extra:
                    type: string
                    description: å¤„ç†åçš„é¢å¤–å‚æ•°åˆ—è¡¨
                    example: "key=value\nkey2=value2"
          description: æœåŠ¡ç«¯å¤„ç†åçš„å‚æ•°
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /tunnel/lock:
    post:
      summary: é”å®šéš§é“
      tags: [éš§é“ç®¡ç†]
      requestBody:
        content:
          application/x-www-form-urlencoded: &tunnelLockRequestBody
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  type: integer
                  description: éš§é“ ID
                  example: 114514
                edit:
                  type: boolean
                  description: æ›´æ–°é”å®šç¼–è¾‘çŠ¶æ€
                  example: true
                delete:
                  type: boolean
                  description: æ›´æ–°é”å®šåˆ é™¤çŠ¶æ€
                  example: true
                migrate:
                  type: boolean
                  description: æ›´æ–°é”å®šè¿ç§»çŠ¶æ€
                  example: true
          application/json: *tunnelLockRequestBody
      responses:
        "204":
          description: é”å®šçŠ¶æ€ä¿®æ”¹æˆåŠŸ
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /tunnel/migrate:
    post:
      summary: è¿ç§»éš§é“
      tags: [éš§é“ç®¡ç†]
      requestBody:
        content:
          application/x-www-form-urlencoded: &tunnelMigrateRequestBody
            schema:
              type: object
              required:
                - id
                - node
              properties:
                id:
                  type: integer
                  description: éš§é“ ID
                  example: 114514
                node:
                  type: integer
                  description: ç›®æ ‡èŠ‚ç‚¹ ID
                  example: 233
          application/json: *tunnelMigrateRequestBody
      responses:
        "204":
          description: è¿ç§»æˆåŠŸ
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /tunnel/delete:
    post:
      summary: åˆ é™¤éš§é“
      tags: [éš§é“ç®¡ç†]
      requestBody:
        content:
          application/x-www-form-urlencoded: &deleteTunnelRequestBody
            schema:
              type: object
              properties:
                ids:
                  description: ä»¥ `,` åˆ†éš”çš„éš§é“ ID åˆ—è¡¨ï¼Œæœ€å¤§æ”¯æŒ 10 æ¡éš§é“
                  type: string
                  example: 114514,1919,810
          application/json: *deleteTunnelRequestBody
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                required:
                  - deleted
                  - failed
                properties:
                  deleted:
                    type: array
                    items:
                      type: integer
                    description: è¢«åˆ é™¤çš„éš§é“ ID åˆ—è¡¨
                    example:
                      - 114514
                      - 114515
                  failed:
                    type: array
                    items:
                      type: integer
                    description: å·²åˆ é™¤ä½†æœªèƒ½æˆåŠŸè¸¢ä¸‹çº¿çš„éš§é“ ID åˆ—è¡¨
                    example:
                      - 1919
          description: åˆ é™¤æˆåŠŸ
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /tunnel/traffic:
    get:
      summary: è·å–æµé‡ä½¿ç”¨è®°å½•
      tags: [éš§é“ç®¡ç†]
      parameters:
        - name: id
          in: query
          description: éš§é“ ID
          required: true
          schema:
            type: integer
            description: éš§é“ ID
            example: 114514
      description: è¿”å› `Timestamp[Traffic]`
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  type: integer
          description: éš§é“æµé‡å†å²è®°å½•
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /tunnel/auth:
    post:
      summary: æˆæƒ IP è®¿é—®éš§é“
      tags: [è®¿é—®è®¤è¯]
      requestBody:
        content:
          application/x-www-form-urlencoded: &tunnelAuthRequestBody
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  description: éš§é“ ID
                  type: integer
                  example: 114514
                ip:
                  description: è¦æˆæƒçš„ IPï¼Œç•™ç©ºæˆæƒè¯·æ±‚ IP
                  type: string
                  example: "114.51.4.191"
          application/json: *tunnelAuthRequestBody
      responses:
        "200":
          content:
            application/json:
              schema:
                type: string
                description: æˆæƒæˆåŠŸçš„ IP
                example: "114.51.4.191"
          description: æˆæƒæˆåŠŸ
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /tunnel/auth_query:
    post:
      summary: æ ¹æ®èŠ‚ç‚¹ IP å’Œç«¯å£æŸ¥è¯¢éš§é“ï¼Œç”¨äºè®¿é—®è®¤è¯æˆæƒ
      tags: [è®¿é—®è®¤è¯]
      requestBody:
        content:
          application/x-www-form-urlencoded: &tunnelRemoteQueryRequestBody
            schema:
              type: object
              required:
                - ip
                - port
              properties:
                ip:
                  description: èŠ‚ç‚¹ IP
                  type: string
                  example: "114.51.4.191"
                port:
                  description: éš§é“è¿œç¨‹ç«¯å£
                  type: integer
                  example: 114514
          application/json: *tunnelRemoteQueryRequestBody
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                required:
                  - id
                  - name
                properties:
                  id:
                    type: integer
                    description: éš§é“ ID
                    example: 114514
                  name:
                    type: string
                    description: éš§é“å
                    example: SampleTunnel
          description: æŸ¥è¯¢åˆ°çš„éš§é“ä¿¡æ¯
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /computers:
    get:
      summary: è·å–è®¡ç®—æœºåˆ—è¡¨
      tags: [è®¡ç®—æœºç®¡ç†]
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: ./schemas/ComputerWithId.yaml
          description: è®¡ç®—æœºåˆ—è¡¨
        "500": { $ref: "#/components/responses/ErrorResponse" }
    post:
      summary: æ·»åŠ è®¡ç®—æœº
      tags: [è®¡ç®—æœºç®¡ç†]
      requestBody:
        content:
          application/x-www-form-urlencoded: &addComputerRequestBody
            schema:
              $ref: ./schemas/Computer.yaml
          application/json: *addComputerRequestBody
      responses:
        "201":
          content:
            application/json:
              schema:
                type: object
                required:
                  - id
                properties:
                  id:
                    type: integer
                    description: è®¡ç®—æœº ID
                    example: 114514
          description: åˆ›å»ºæˆåŠŸ
        "500": { $ref: "#/components/responses/ErrorResponse" }
    patch:
      summary: æ›´æ–°è®¡ç®—æœºä¿¡æ¯
      tags: [è®¡ç®—æœºç®¡ç†]
      requestBody:
        content:
          application/x-www-form-urlencoded: &updateComputersRequestBody
            schema:
              $ref: ./schemas/ComputerWithId.yaml
          application/json: *updateComputersRequestBody
      responses:
        "204":
          description: æ›´æ–°æˆåŠŸ
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /computer/delete:
    post:
      summary: åˆ é™¤è®¡ç®—æœº
      tags: [è®¡ç®—æœºç®¡ç†]
      requestBody:
        content:
          application/x-www-form-urlencoded: &deleteComputerRequestBody
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  type: integer
                  description: è®¡ç®—æœº ID
                  example: 1001
          application/json: *deleteComputerRequestBody
      responses:
        "204":
          description: åˆ é™¤æˆåŠŸ
        "500": { $ref: "#/components/responses/ErrorResponse" }

  /computer/poweron:
    post:
      summary: æ‰§è¡Œè¿œç¨‹å¼€æœº
      tags: [è®¡ç®—æœºç®¡ç†]
      requestBody:
        content:
          application/x-www-form-urlencoded: &powerOnRequestBody
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  type: integer
                  description: è®¡ç®—æœº ID
                  example: 1001
                password:
                  type: string
                  description: è¿œç¨‹å¼€æœºå®¢æˆ·ç«¯å¯†ç 
                  example: "wdnmdpassword"
          application/json: *powerOnRequestBody
      responses:
        "204":
          description: å¼€æœºæˆåŠŸ
        "500": { $ref: "#/components/responses/ErrorResponse" }

components:
  responses:
    ErrorResponse:
      content:
        application/json:
          schema:
            type: object
            required:
              - code
              - msg
            properties:
              code:
                description: é”™è¯¯ä»£ç 
                type: integer
                example: 403
              msg:
                description: äººç±»å‹å¥½çš„é”™è¯¯ä¿¡æ¯
                type: string
                example: æ— æƒè®¿é—®
      description: é€šç”¨é”™è¯¯è¿”å›

  securitySchemes:
    # PanelSessionCookie:
    #   type: apiKey
    #   description: ä¸»ç«™ PHP Session è®¤è¯
    #   name: PHPSESSID
    #   in: cookie
    UserToken:
      scheme: bearer
      type: http
      description: è®¿é—®å¯†é’¥è®¤è¯ - Bearer Token
    UserTokenPost:
      type: apiKey
      description: è®¿é—®å¯†é’¥è®¤è¯ - POST å‚æ•°
      name: token
      in: query

security:
  - UserToken: []
  - UserTokenPost: []
  # - PanelSessionCookie: []
